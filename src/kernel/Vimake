module: kernel
version: 0.0.3-34
autoimpls:
  source: x86_64
  dest:
    i686:
      params:
        bitness: 32
    aarch64: {}
    arm:
      params:
        bitness: 32
impls:
  x86_64:
    params:
      bitness: 64
    deps:
      build:
      - ${ImplName}-elf-g++
      - ${ImplName}-elf-gcc
      - ${ImplName}-elf-ld
      - ${ImplName}-elf-as
      modules: []
    actions:
      build:
        commands:
        - - ${ImplName}-elf-gcc
          - -m${param:bitness}
          - -nostdlib
          - -nostartfiles
          - -fno-stack-protector
          - -fno-pie
          - -ffreestanding
          - -c
          - -o
          - ${ProjRoot}/dist/arith.o
          - ${ProjRoot}/src/kernel/src/arith.c
        - - ${ImplName}-elf-g++
          - -std=c++20
          - -I${ProjRoot}/include
          - -I${ProjRoot}/include/arch/${ImplName}
          - -m${param:bitness}
          - -nostdlib
          - -nostartfiles
          - -nostdinc
          - -nostdinc++
          - -fno-stack-protector
          - -fno-pie
          - -ffreestanding
          - -o
          - ${ProjRoot}/dist/kernel.elf
          - ${ProjRoot}/src/kernel/src/main.cpp
          - ${ProjRoot}/dist/arith.o
        - - elf2hxe
          - ${ProjRoot}/dist/kernel.elf
          - ${ProjRoot}/dist/kernel.hxe
          - hxeconfs/${ImplName}.json
        files:
        - ${ProjRoot}/dist/kernel.elf
